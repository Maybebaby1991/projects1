# Проект: Анализ и визуализация результатов моделирования экситонной динамики в hBN

Этот репозиторий содержит набор Python-скриптов для пост-обработки, анализа и визуализации данных, полученных в ходе численного моделирования экситонной динамики и оптического отклика в гексагональном нитриде бора (hBN). Скрипты предназначены для работы с предварительно сгенерированными результатами симуляций.

## Описание скриптов

Ниже приведено описание каждого скрипта.

---

### 1. `Absorption_compare_Hartree.py`

*   **Роль в проекте:** Сравнение спектров поглощения для различных параметров симуляции.
*   **Описание:** Скрипт считывает данные о Фурье-образах тока и электрического поля из предопределенного набора текстовых файлов, каждый из которых соответствует симуляции с определенными параметрами (например, разные значения `R0`, `EPS`, с/без кулоновского взаимодействия в приближении Хартри). На основе этих данных вычисляет спектры поглощения и строит единый график для их визуального сравнения.
*   **Зависимости:** `numpy`, `matplotlib.pyplot`, `os`.
*   **Входные данные:**
    *   Текстовые файлы (например, `Current_w_...txt`), содержащие колонки данных: частота (`W_eV`), реальные и мнимые части компонент Фурье-образов тока (`Jw`) и электрического поля (`Ew`).
    *   Пути к этим файлам и соответствующие метки для легенды графика жестко прописаны в переменных `path`, `Folders_XUV`, `Files_XUV` и `Labels`.
*   **Выходные данные:**
    *   График, отображающий сравнение спектров поглощения, сохраненный в файл `KRASIVO.pdf`.
    *   Окно с отображаемым графиком.
*   **Связь с проектной работой:** Использовался для генерации графиков,представленных на Рис. 5 и Рис. 3, демонстрирующих влияние параметров экранирования и диэлектрической проницаемости, а также для визуализации возникающих токов и их Фурье образа.

---

### 2. `ATA_specrtum_hBN_Exciton.py`

*   **Роль в проекте:** Обработка данных симуляций накачки-зонда для получения 1D спектров поглощения.
*   **Описание:** Скрипт предназначен для обработки данных временной динамики (поле, дипольный момент), полученных из симуляций методом "накачка-зонд". Он считывает данные из файлов (`TransientAbs.txt`, `EF.txt`) для симуляций с накачкой (при нулевой задержке) и без накачки (референс). Выполняет преобразование Фурье с помощью функции `fft_abs` (которая использует внешний модуль `cbwe_Python_source.fft_creation`) для расчета спектра поглощения. В текущей версии значительная часть кода для построения 2D карты спектров переходного поглощения (ATA/TAS) закомментирована. Скрипт сохраняет полученные 1D спектры поглощения (для случая без накачки и с накачкой при нулевой задержке) в текстовые файлы с префиксом `2p_` (например, `2p_Abs_no_pump.txt`, `2p_w_at_zero.txt`).
*   **Зависимости:** `numpy`, `matplotlib.pyplot`, `os`, **критически важная внешняя зависимость: модуль/функция `cbwe_Python_source.fft_creation.prepareDataFFT_ATA`**.
*   **Входные данные:**
    *   Структура папок с результатами симуляций. Ожидаются файлы `Output/TransientAbs.txt`, `Output/EF.txt` и `input.txt` (для извлечения поляризации) внутри подпапок, соответствующих результатам симуляций.
    *   Пути к данным и параметры симуляций (например, задержки) частично задаются в коде.
*   **Выходные данные:**
    *   Текстовые файлы с 1D спектрами поглощения: `2p_Abs_no_pump.txt`, `2p_w_no_pump.txt`, `2p_Abs_at_zero.txt`, `2p_w_at_zero.txt`.
*   **Связь с проектной работой:** Анализ результатов моделирования методом накачки-зондирования (Раздел 2). Выходные файлы этого скрипта (1D спектры) являются входными данными для скрипта `Graph_creator_NOINTENSE.py`.

---

### 3. `Graph_creator_NOINTENSE.py`

*   **Роль в проекте:** Автоматизированное построение сравнительных графиков спектров поглощения на основе предварительно обработанных данных.
*   **Описание:** Скрипт считывает данные 1D спектров поглощения (созданные скриптом `ATA_specrtum_hBN_Exciton.py`) из множества предопределенных папок. Имена папок должны содержать информацию о параметрах симуляции (`R0`, `EPS`), которую скрипт извлекает с помощью регулярных выражений. Генерирует два сравнительных подграфика: зависимость спектра от `EPS` при фиксированном `R0`, и зависимость от `R0` при фиксированном `EPS`. На оба графика также наносится спектр для случая `NOCOULOMB`. Название "NOINTENSE" указывает на обработку данных симуляций с нулевой интенсивностью накачки.
*   **Зависимости:** `os`, `re` (регулярные выражения), `numpy`, `matplotlib.pyplot`.
*   **Входные данные:**
    *   Структура папок, где каждая папка содержит текстовые файлы с 1D спектрами поглощения (например, `2p_w_at_zero.txt`, `2p_Abs_at_zero.txt`).
    *   Имена папок должны соответствовать шаблону для извлечения `R0` и `EPS`.
    *   Пути к данным и списки папок задаются в коде.
*   **Выходные данные:**
    *   Окно с отображаемым графиком, содержащим два подграфика, сравнивающих спектры поглощения.
*   **Связь с проектной работой:** Генерация графика Рис. 7, на основе данных, подготовленных `ATA_specrtum_hBN_Exciton.py`.

---

### 4. `Losses_Graph.py`

*   **Роль в проекте:** Сравнение динамики заселенностей (потерь) для симуляций с учетом и без учета кулоновского взаимодействия.
*   **Описание:** Скрипт считывает данные из двух конкретных файлов `Losses.txt`, один из которых соответствует симуляции с кулоновским взаимодействием, а другой – симуляции `NOCOULOMB`. Использует библиотеку `pandas` для чтения данных. Строит графики временной зависимости для нескольких выбранных колонок, накладывая на каждый подграфик кривые для обоих случаев (с/без кулоновского взаимодействия) для наглядного сравнения.
*   **Зависимости:** `matplotlib.pyplot`, `pandas`, `os`.
*   **Входные данные:**
    *   Два файла `Losses.txt`, пути к которым жестко заданы в скрипте. Файлы должны быть в текстовом формате, с данными, разделенными пробелами (первая колонка – время).
*   **Выходные данные:**
    *   Окно с отображаемым графиком, сравнивающим временную динамику заселенностей.
*   **Связь с проектной работой:** Визуализация влияния кулоновского взаимодействия на динамику заселенности Рис. 4.

## Общие требования для запуска

*   **Python 3.x**
*   **Библиотеки:** `numpy`, `matplotlib`, `pandas`. Установить можно через pip:
    ```bash
    pip install numpy matplotlib pandas
    ```
*   **Для `ATA_specrtum_hBN_Exciton.py`:** Необходим доступ к модулю/пакету `cbwe_Python_source` и его функции `fft_creation.prepareDataFFT_ATA`. Путь к этому модулю должен быть доступен интерпретатору Python. Папка со всеми нужными компонентами также загружена во общий репозиторий.

## Порядок работы и настройка

1.  **Подготовка данных:** Убедитесь, что результаты первичных симуляций (файлы с временной динамикой, спектрами тока/поля, данными о потерях) находятся в ожидаемых директориях и имеют корректные имена.
2.  **Запуск `ATA_specrtum_hBN_Exciton.py` (при необходимости):**
    *   Если вам нужно получить файлы `2p_*.txt` из более "сырых" данных симуляций накачки-зонда, запустите этот скрипт.
    *   **Важно:** Обеспечьте доступность зависимости `cbwe_Python_source.fft_creation.prepareDataFFT_ATA`.
    *   Адаптируйте пути `path1` и `path2`, а также `folderlist` и `folderlist_0` внутри скрипта под ваши данные.
3.  **Запуск скриптов визуализации:**
    *   Для построения сравнительных графиков спектров поглощения на основе файлов, сгенерированных `ATA_specrtum_hBN_Exciton.py` (или аналогичных), используйте `Graph_creator_NOINTENSE.py`. Настройте `BASE_PATH` и `folder_names_to_process`.
    *   Для прямого сравнения спектров из файлов `Current_w_...txt` можно использовать `Absorption_compare_Hartree.py`. Настройте `path`, `Folders_XUV`, `Files_XUV`.
    *   Для сравнения данных о потерях/заселенностях запустите `Losses_Graph.py`. Настройте `file_path_str_1` и `file_path_str_2`.
4.  **Адаптация путей:** Все скрипты содержат жестко прописанные пути к данным и/или имена папок. Перед запуском необходимо внимательно проверить и адаптировать эти пути под вашу структуру директорий с результатами симуляций.

## Автор

Колецкий Александр Олегович